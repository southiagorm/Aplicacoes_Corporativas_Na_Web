<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:composition template="WEB-INF/template/_templateGenerico.xhtml">

	<ui:define name="titulo">Cadastro Funcionário</ui:define>
	
	<ui:define name="titulo_pagina">Cadastro Funcionário</ui:define>
	
	<ui:define name="conteudo">
		<p:messages closable="true"/>
		<h:form>
			<p:panelGrid columns="2">
				<p:outputLabel for="nome" value="Nome: "/>
				<p:inputText id="nome" value="#{cadastrarFuncionarioBean.funcionario.nome}"/>
				<p:outputLabel for="matricula" value="Matricula: "/>
				<p:inputText id="matricula" value="#{cadastrarFuncionarioBean.funcionario.matricula}"/>
				<p:outputLabel for="salario" value="Salário "/>
				<p:inputText id="salario" value="#{cadastrarFuncionarioBean.funcionario.salario}"/>
			</p:panelGrid>
			<p:panelGrid columns="3">
				<p:outputLabel for="setor" value="Setor "/>
				<p:selectOneMenu id="setor" value="#{cadastrarFuncionarioBean.setorId}">
					<p:ajax listener="#{cadastrarFuncionarioBean.addSetorFuncionario}" event="change" process="@this" update="tabela_setores"/>
					<f:selectItem itemLabel="Selecione um Setor"/>
					<f:selectItems value="#{cadastrarFuncionarioBean.setores}" var="setor" itemLabel="#{setor.nome}" itemValue="#{setor.id}"/>
				</p:selectOneMenu>
				<p:link value="Cadastrar Setor" outcome="cadastroSetor.xhtml"/>
			</p:panelGrid>
			<p:dataTable var="setor" value="#{cadastrarFuncionarioBean.funcionario.setores}" id="tabela_setores" emptyMessage="Nenhum Setor Adicionado">
				<p:column headerText="Nome">
					<h:outputText value="#{setor.nome}"/>
				</p:column>
			</p:dataTable>
			<p:panelGrid columns="2">
				<p:commandButton value="#{(!cadastrarFuncionarioBean.fSession) ? 'Cadastrar' : 'Atualizar'}" action="#{cadastrarFuncionarioBean.save}" ajax="false"/>
			</p:panelGrid>
		</h:form>
	</ui:define>

</ui:composition>

</html>